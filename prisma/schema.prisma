// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

// generator erd {
//   provider = "prisma-erd-generator"
// }

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Supermercado{
  id String @id @default(cuid())
  name String
  pesquisaIdS String?
  pesquisa Pesquisa? @relation(fields: [pesquisaIdS], references: [id])
}
model Pesquisa{
  id String @id @default(cuid())
  mes_ano String
  createdAt DateTime @default(now())
  PesProdIdPes String?
  supermercado Supermercado[]
  user User[]
  pesprod PesProd? @relation(fields: [PesProdIdPes], references: [id]) 
}

model PesquisaGeral{
  id String @id @default(cuid())
  mes_ano String
  ativo Boolean @default(true)
  createdAt DateTime @default(now())
  nome_supermercado String
  carneBovina Int?
  leiteIntegral Int?
  feijaoCarioca Int?
  arrozParboilizado Int?
  farinhaMandioca Int?
  tomate Int?
  pao Int?
  cafePo Int?
  acucar Int?
  banana Int?
  oleoSoja Int?
  manteiga Int?

  pesquisas PesquisaCompleta[]

}
model PesquisaCompleta{
  id String @id @default(cuid())
  ativo Boolean @default(true)
  mes_ano String
  finalizado Boolean @default(false)
  createdAt DateTime @default(now())
  nome_supermercado String
  carneBovinaChaDentro Int?
  carneBovinaChaFora Int?
  carneBovinaPatinhoCoxaoMole Int?
  carneBovina Int?
  
  leiteIntegralValeDourado Int?
  leiteIntegralPiracanjuba Int?
  leiteIntegralSabugi Int?
  leiteIntegral Int?
  
  feijaoCariocaUrbano Int?
  feijaoCariocaDuPrato Int?
  feijaoCariocaCunhau Int?
  feijaoCarioca Int?
  
  arrozParboilizadoChines Int?
  arrozParboilizadoFortelli Int?
  arrozParboilizadoUrbano Int?
  arrozParboilizado Int?
  
  farinhaMandiocaQuentinha Int?
  farinhaMandiocaCurimatau Int?
  farinhaMandiocaDuPrato Int?
  farinhaMandioca Int?
  
  tomate Int?
  
  pao Int?
  
  cafePoSaoBraz Int?
  cafePoSantaClara Int?
  cafePoNordestino Int?
  cafePo Int?
  
  acucarNectar Int?
  acucarPuroMel Int?
  acucar Int?
  
  bananaPrata Int?
  bananaPacovan Int?
  banana Int?
  
  oleoSojaSoya Int?
  oleoSojaPrimor Int?
  oleoSoja Int?

  manteigaSaborosa Int?
  manteigaJucurutu Int?
  manteigaTerra Int?
  manteiga Int?
  
// Adicione uma chave estrangeira para o usuário
  userId String?
  PesquisaGeral_id String?
  // Defina a relação com o usuário
  user User? @relation(fields: [userId], references: [id])
  pesquisaGeral PesquisaGeral? @relation(fields: [PesquisaGeral_id], references: [id])
}

model PesProd{
  id String @id @default(cuid())
  produtos Produto[]
  pesquisa Pesquisa[]
}
model Produto{
  id String @id @default(cuid())
  name String
  peso_qtd String
  tipo_qtd String
  preco Int
  PesProdPr String?
  pesprod PesProd? @relation(fields: [PesProdPr], references: [id]) 
}



model User{
  id String @id @default(cuid())
  name String
  ativo Boolean @default(true)
  email String @unique
  googleId String? @unique
  matricula String?
  avatarUrl String?
  autorizacao_pesquisa Boolean @default(false)
  tipo String @default("Aluno")
  createdAt DateTime @default(now())
  pesquisaIdU String?
  pesquisa Pesquisa? @relation(fields: [pesquisaIdU], references: [id])
  pesquisaComp PesquisaCompleta[]
}
